<template>
  <div class="sign-up">
    <VulnerabilityNav></VulnerabilityNav>
    <div class="su-inner">
    	<div class="su-steps">
    		<div class="su-step su-step-1" v-if="isOnFirstStep()">
    			<div class="su-roles">
    				<router-link to="/vulnerabilities/sign-up?role=discoverer" tag="div" class="su-role su-role-discoverer">
    					<div class="su-role-icon">
								<svg width="92" height="92">
									<g>
										<polygon class="svg-fg" points="38.4,38.2 38.4,38.2 38.4,38.2 	"/>
										<polygon class="svg-fg" points="38.4,38.2 38.4,38.2 38.4,38.2 	"/>
										<path d="M53.8,52.4H22.9l-4.6-7.9l15.4-26.7l9.2,0l15.4,26.7L53.8,52.4z M24.7,49.4h27.4l2.8-4.9L41.2,20.8l-5.7,0L21.8,44.5
											L24.7,49.4z"/>
									</g>
									<rect x="36.5" y="27" width="3.7" height="11.2"/>
									<rect x="36.5" y="41.5" width="3.7" height="3.6"/>
									<path d="M89.3,85.7l-24-24c12.2-14,11.6-35.3-1.7-48.7C49.7-0.8,27-0.8,13.1,13.1c-13.9,13.9-13.9,36.6,0,50.5
										c7,7,16.1,10.4,25.2,10.4c8.4,0,16.7-2.9,23.4-8.7l24,24c0.5,0.5,1.1,0.7,1.8,0.7s1.3-0.2,1.8-0.7C90.2,88.3,90.2,86.7,89.3,85.7z
										 M16.6,60.1c-5.8-5.8-9-13.5-9-21.7c0-8.2,3.2-15.9,9-21.7c5.8-5.8,13.5-9,21.7-9c8.2,0,15.9,3.2,21.7,9c5.8,5.8,9,13.5,9,21.7
										c0,8.2-3.2,15.9-9,21.7s-13.5,9-21.7,9C30.2,69.1,22.4,65.9,16.6,60.1z"/>
								</svg>    						
    					</div>
    					<div class="su-role-text">
    						<div class="su-role-title">Discoverer</div>
    						<div class="su-role-description">
    							Discoverers are individuals who find software vulnerabilities and provide vulnerability information by identifying new vulnerabilities and updating existing vulnerabilities in the CVE system
    						</div>
    					</div><!-- .su-role-text -->
    				</router-link>
    				<router-link to="/vulnerabilities/sign-up?role=authority" tag="div" class="su-role su-role-authority">
    					<div class="su-role-icon">
								<svg width="92" height="92">
									<g>
										<polygon points="59,37.5 56.3,34.8 42.8,48.2 38,43.4 35.3,46.2 42.8,53.7 42.8,53.7 42.8,53.7 	"/>
										<path d="M47.3,86.9h-2.6L32,78.2C27.5,75,13.7,65.3,13.7,54.2V15.8L45.5,4h0.9l0.5,0.2l31.4,11.7v38.4c0,11.1-13.7,20.9-18.2,24
											L47.3,86.9z M18.7,19.3v34.9c0,3.9,2.8,10.5,16.1,20L46,81.7l11.2-7.6c13.3-9.4,16.1-16,16.1-19.9V19.3L46,9.1L18.7,19.3z"/>
									</g>
								</svg>
    					</div>
    					<div class="su-role-text">
    						<div class="su-role-title">Authority</div>
    						<div class="su-role-description">
    							Authorities are vendors and organizations that own software products and platforms that are authorized to approve vulnerabilities and assign CVE IDs to vulnerabilities within their scope
    						</div>
    					</div><!-- .su-role-text -->
    				</router-link>
    			</div>
    			<div class="su-message">
    				Select the role that best describes you
    			</div>
    		</div>
    		<div class="su-step su-step-2">
    			<div class="su-form su-discoverer-form" v-if="isDiscoverer()">
    				<h1>Sign Up as a Discoverer</h1>
    				<div class="su-form-description">Discoverers are individuals who find software vulnerabilities and provide vulnerability information by identifying new vulnerabilities and updating existing vulnerabilities in the CVE system</div>
						<div class="field">
						  <label class="label">First Name</label>
						  <div class="control">
						    <input class="input" type="text" placeholder="Enter First Name">
						  </div>
						</div>
						<div class="field">
						  <label class="label">Last Name</label>
						  <div class="control">
						    <input class="input" type="text" placeholder="Enter Last Name">
						  </div>
						</div>
						<div class="field">
						  <label class="label">E-mail</label>
						  <div class="control">
						    <input class="input  is-danger" type="text" placeholder="Enter E-mail">
						  </div>
						  <p class="help is-danger">This email is invalid</p>
						</div>

						<div class="field">
						  <div class="control">
						    <label class="checkbox">
						      <input type="checkbox">
						      I agree to the <a href="#">terms and conditions</a>
						    </label>
						  </div>
						</div>

						<div class="field is-grouped">
						  <div class="control">
						    <button class="button is-link">Submit</button>
						  </div>
						  <div class="control">
						    <router-link tag="button" to="/vulnerabilities/sign-up" class="button is-text">Cancel</router-link>
						  </div>
						</div>    				
    			</div>
    			<div class="su-form su-authority-form" v-if="isAuthority()">
    				<h1>Sign Up as an Authority</h1>
    				<div class="su-form-description">
    							Authorities are vendors and organizations that own software products and platforms that are authorized to approve vulnerabilities and assign CVE IDs to vulnerabilities within their scope</div>

						<div class="field">
						  <label class="label">Organization Name</label>
						  <div class="control">
						    <input class="input" type="text" placeholder="Enter Organziation Name">
						  </div>
						</div>

						<div class="field">
						  <label class="label">Website</label>
						  <div class="control">
						    <input class="input" type="text" placeholder="Enter Website">
						  </div>
						</div>

						<div class="field">
						  <label class="label">E-mail</label>
						  <div class="control">
						    <input class="input" type="text" placeholder="Enter E-mail">
						  </div>
						</div>

						<div class="field">
						  <label class="label">Authority Type</label>
						  <div class="control">
						    <label class="radio" style="display: block; margin: 0;">
						      <input checked="checked" type="radio" name="authtype">
						      Software Vendor
						    </label>
						    <label class="radio" style="display: block; margin: 0;">
						      <input type="radio" name="authtype">
						      Open Source Project
						    </label>
						    <label class="radio" style="display: block; margin: 0;">
						      <input type="radio" name="authtype">
						      Coordination Center
						    </label>
						    <label class="radio" style="display: block; margin: 0;">
						      <input type="radio" name="authtype">
						      Bug Bounty Service Provider
						    </label>
						    <label class="radio" style="display: block; margin: 0;">
						      <input type="radio" name="authtype">
						      Research Group
						    </label>
						  </div>
						</div>						

						<div class="field">
						  <label class="label">E-mail</label>
						  <div class="control">
						    <input class="input  is-danger" type="text" placeholder="Text input">
						  </div>
						  <p class="help is-danger">This email is invalid</p>
						</div>

						<div class="field">
							<label class="label">Reason for becoming a CVE Numbering Authority (CNA)</label>
							<div class="control">
								<textarea class="textarea"></textarea>
							</div>
						</div>

						<div class="field">
						  <div class="control">
						    <label class="checkbox">
						      <input type="checkbox">
						      I agree to the <a href="#">Terms and Conditions</a>
						    </label>
						  </div>
						</div>

						<div class="field is-grouped">
						  <div class="control">
						    <button class="button is-link">Submit</button>
						  </div>
						  <div class="control">
						    <router-link tag="button" to="/vulnerabilities/sign-up" class="button is-text">Cancel</router-link>
						  </div>
						</div>    				
    			</div>
    		</div>
    	</div>
    </div><!-- .su-inner -->
    <FooterModule></FooterModule>
  </div>
</template>

<script>
	import VulnerabilityNav from '@/components/VulnerabilityNav.vue';
	import FooterModule from '@/components/FooterModule.vue';
		export default {
		  name: 'SignUp',
		  components: {
		  	VulnerabilityNav: VulnerabilityNav,
	    	FooterModule: FooterModule
		  },
		  data: function() {
		  	return {
		  		role: null
		  	}
		  },
		  mounted: function() {
		  	window.su = this;
		  	console.log('su mounted!!!');
		  	this.checkRole();
		  },
		  watch: {
		  	$route: function(to, from) {
		  		console.log('su route change');
		  		this.checkRole();
		  	}
		  },
		  methods: {
		  	selectRole: function(roleType) {
		  		this.$router.push({ path: 'sign-up', query: { role: roleType }});

		  	},
		  	checkRole: function() {
		  		console.log('su.checkRole');
		  		if(this.$route.query.role === 'discoverer') {
		  			this.role = 'discoverer';
		  		} else if (this.$route.query.role === 'authority') {
		  			this.role = 'authority';
		  		} else {
		  			this.role = null;
		  		}
		  		console.log('role = ' + this.role);
		  	},
		  	isOnFirstStep: function() {
		  		return this.role === null;
		  	},
		  	isDiscoverer: function() {
		  		return this.role === 'discoverer';
		  	},
		  	isAuthority: function() {
		  		return this.role === 'authority';
		  	}
		  }
		}
</script>

<style scoped lang="scss">
  @import '../assets/style/globals';

  .su-inner {
    margin: auto;
    max-width: $max-width;
    padding: 0;
  }

  .svg-fg {
  	fill: none;
		stroke: $fg1;
		stroke-width: 3;
		stroke-miterlimit: 10;
  }

  .su-roles {
  	margin: 20px 0 0 0;
  	display: flex;
  	align-content: flex-top;
  	justify-content: center;

  	.su-role-discoverer { margin-right: 20px;}
  	.su-role-authority { margin-left: 20px;}

  	.su-role:hover {
  		background: #eee;
  	}

  	.su-role {
  		width: 50%;
  		cursor: pointer;
  		text-align: center;
	    border: #ccc 1px solid;
	    padding: 20px;
	    border-radius: 18px;

  		.su-role-icon {
  			text-align: center;
  		}

  		.su-role-text {

  			.su-role-title {
  				font-weight: 700;
  				color: $fg1;
  			}

  			.su-role-description {
  				font-size: 14px;
  			}
  		}
  	}
  }

  .su-message {
  	color: $fg1;
  	margin: 50px 0;
  	text-align: center;
  }

  h1 {
    font-size: 20px;
    margin-bottom: 15px;
  }

  .su-form {
  	padding: 0 20px;
  	margin-bottom: 50px;
  }

  .su-form-description {
  	margin-bottom: 20px;
  }

</style>