<template>
  <div id="cve-json-container">
    <h1 class="title">{{this.$store.state.cveId}}</h1>
    <JsonTree :raw="JSON.stringify(record, null, 2)"></JsonTree>
  </div>
</template>

<script>
import _ from 'lodash';
import JsonTree from 'vue-json-tree';

export default ({
  name: 'CVEJsonView',
  components: {
    JsonTree,
  },
  data() {
    return {
      record: {},
    };
  },
  created() {
    this.getJSon();
  },
  methods: {
    getJSon() {
      console.log('1, ', _.isEmpty(this.$store.state.recordData), _.isEmpty(this.$store.state.idData));
      console.log('2, ', _.isUndefined(this.$store.state.isArecord), !_.isUndefined(this.$store.state.isArecord));
      console.log('3, ', _.isEmpty(this.$store.state.recordData), !_.isEmpty(this.$store.state.recordData));
      console.log('4, ', _.isEmpty(this.$store.state.idData), !_.isEmpty(this.$store.state.idData));

      if (_.isUndefined(this.$store.state.isArecord) || (_.isEmpty(this.$store.state.recordData) && _.isEmpty(this.$store.state.idData))) {
        this.$router.push('/');
      }
      if (this.$store.state.isArecord && !_.isEmpty(this.$store.state.recordData)) {
        this.record = this.$store.state.recordData;
      } else if (!this.$store.state.isArecord && !_.isEmpty(this.$store.state.idData)) {
        this.record = this.$store.state.idData;
      } else {
        this.$router.push('/');
      }
    },
  },
});
</script>

<style lang="scss">
@import '@/assets/style/globals.scss';

.json-tree {
  font-size: 16px !important;
}

.json-tree-value {
  color: $theme-color-primary-darker !important;
  /* unset to show overflown text */
  overflow: unset !important;
  white-space: unset !important;
}
</style>
