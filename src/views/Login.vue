<template>
  <div class="login">
    <div class="login-inner">
    	<div class="login-box">

    		<div class="login-logo">
    			<router-link to="/">
    				<svg width="32" height="35">
							<path d="M29.4,21.2c-1.1-0.6-2.4-0.6-3.5,0c-0.2,0.1-0.8,0.4-1.1,0.3c-0.4-0.1-1-0.5-1.3-0.6l-0.7-0.4l-0.4-0.2c0,0,0.1,0-0.4-0.2
								c-0.5-0.3-0.9-0.8-0.8-1.5l0,0c0.1-0.4,0.1-0.7,0.1-1.1c0-0.4,0-0.7-0.1-1.1c-0.1-0.7,0.3-1.2,0.8-1.5c0.5-0.3,0.4-0.2,0.4-0.2
								l0.4-0.2l0.7-0.4c0.3-0.2,0.9-0.5,1.3-0.6c0.3-0.1,0.9,0.2,1.1,0.3c1,0.6,2.4,0.7,3.5,0c1.6-0.9,2.2-3,1.3-4.7L30.6,9
								c-0.9-1.6-3-2.2-4.7-1.3c-1.1,0.6-1.7,1.8-1.7,3c0,0.2,0,0.9-0.3,1.1c-0.3,0.3-0.9,0.6-1.2,0.8L22.2,13l-0.6,0.3l-0.3,0.2
								c-0.5,0.3-1.2,0.4-1.7-0.1l0,0c-0.5-0.5-1.2-0.9-1.9-1.1v0c-0.6-0.3-0.9-0.9-0.9-1.4c0-0.4,0-0.5,0-0.5c0,0,0,0,0,0V10l0-0.8
								c0-0.3,0-1,0.1-1.4C17,7.5,17.6,7.1,17.7,7c1.1-0.6,1.8-1.7,1.8-3c0-1.9-1.5-3.4-3.4-3.4h-0.1c-1.9,0-3.4,1.5-3.4,3.4
								c0,1.3,0.7,2.4,1.8,3c0.2,0.1,0.8,0.5,0.8,0.8c0.1,0.5,0.1,1.1,0.1,1.4l0,0.6v0.7v0.4c0,0.6-0.3,1.2-0.9,1.4v0
								c-0.7,0.2-1.4,0.6-1.9,1.1l0,0c-0.5,0.4-1.2,0.4-1.7,0.1c-0.5-0.3-0.4-0.2-0.4-0.2l-0.4-0.2l-0.7-0.4c-0.3-0.2-0.9-0.5-1.2-0.8
								c-0.2-0.2-0.3-0.9-0.3-1.1c0-1.2-0.6-2.4-1.7-3C4.4,6.8,2.3,7.3,1.4,9L1.3,9.1c-0.9,1.6-0.4,3.7,1.3,4.7c1.1,0.6,2.4,0.6,3.5,0
								c0.2-0.1,0.8-0.4,1.1-0.3c0.4,0.1,1,0.5,1.3,0.6L9,14.4l0.6,0.3l0.3,0.2c0.5,0.3,0.9,0.8,0.8,1.5c-0.1,0.4-0.1,0.7-0.1,1.1
								s0,0.7,0.1,1.1c0.1,0.7-0.3,1.2-0.8,1.5l-0.3,0.2L9,20.6L8.5,21c-0.3,0.2-0.9,0.5-1.3,0.6c-0.3,0.1-0.9-0.2-1.1-0.3
								c-1-0.6-2.4-0.7-3.5,0c-1.6,0.9-2.2,3-1.3,4.7L1.4,26c0.9,1.6,3,2.2,4.7,1.3c1.1-0.6,1.7-1.8,1.7-3c0-0.2,0-0.9,0.3-1.1
								c0.3-0.3,0.9-0.6,1.2-0.8l0.7-0.4l0.4-0.2c0,0-0.1,0,0.4-0.2c0.5-0.3,1.2-0.4,1.7,0.1l0,0c0.5,0.5,1.2,0.9,1.9,1.1v0
								c0.6,0.3,0.9,0.9,0.9,1.4v0.4v0.7l0,0.6c0,0.3,0,1-0.1,1.4c-0.1,0.3-0.7,0.7-0.8,0.8c-1.1,0.6-1.8,1.7-1.8,3c0,1.9,1.5,3.4,3.4,3.4
								h0.1c1.9,0,3.4-1.5,3.4-3.4c0-1.3-0.7-2.4-1.8-3c-0.2-0.1-0.8-0.5-0.8-0.8c-0.1-0.5-0.1-1.1-0.1-1.4l0-0.8v-0.4v0c0,0,0-0.1,0-0.5
								c0-0.6,0.3-1.2,0.9-1.4v0c0.7-0.2,1.3-0.6,1.9-1.1l0,0c0.5-0.4,1.2-0.4,1.7-0.1l0.3,0.2l0.6,0.3l0.5,0.3c0.3,0.2,0.9,0.5,1.2,0.8
								c0.2,0.2,0.3,0.9,0.3,1.1c0,1.2,0.6,2.4,1.7,3c1.6,0.9,3.7,0.4,4.7-1.3l0.1-0.1C31.6,24.3,31.1,22.2,29.4,21.2z"/>
						</svg>
					</router-link>
    		</div>
    		<div class="login-title">
    			Log into CVE
    		</div>


				<div class="notification is-danger" v-if="hasError === true">
				  <button class="delete" v-on:click="hideError()"></button>
				  E-mail password combindation not found
				</div>

	    	<div class="field">
				  <label class="label">E-mail</label>
				  <div class="control">
				    <input v-model="email" class="input" type="text" placeholder=""v-on:keyup.enter="submit">
				  </div>
				</div>

	    	<div class="field">
				  <label class="label">Password</label>
				  <div class="control">
				    <input class="input" type="password" placeholder=""v-on:keyup.enter="submit">
				  </div>
				</div>

				<button type="submit" class="button is-black is-fullwidth"v-on:click="submit">
		      <span>Login</span>
				</button>

				<div class="login-extra-actions">
					<div class="login-extra-action">
						<router-link to="/signup">Sign Up</router-link>	
					</div>
					<div class="login-extra-action">
						<router-link to="/forgot-password">Forgot Password?</router-link>	
					</div>
				</div>
	    </div>
    </div><!-- .login-inner -->
  </div><!-- .login -->
</template>

<script>
	import VulnerabilityNav from '@/components/VulnerabilityNav.vue';
	import FooterModule from '@/components/FooterModule.vue';
		export default {
		  name: 'SignUp',
		  components: {
		  	VulnerabilityNav: VulnerabilityNav,
	    	FooterModule: FooterModule
		  },
		  data: function() {
		  	return {
		  		role: null,
		  		email: '',
		  		hasError: false
		  	}
		  },
		  mounted: function() {
		  },
		  watch: {
		  	$route: function(to, from) {
		  	}
		  },
		  methods: {
		  	submit: function() {
		  		//TODO real auth, redirect
		  		if(this.email === 'discoverer@domain.com') {
		  			this.$store.commit('setAuthenticated', true);
		  			this.$store.commit('setEmail', this.email);
		  			this.$store.commit('setRole', 'discoverer');
		  			this.$router.push('/dashboard?role=discoverer');
		  		} else if(this.email === 'cna@domain.com') {
		  			this.$store.commit('setAuthenticated', true);
		  			this.$store.commit('setEmail', this.email);
		  			this.$store.commit('setRole', 'authority');
		  			this.$router.push('/dashboard?role=authority');
		  		} else if(this.email === 'wg@domain.com') {
		  			this.$store.commit('setAuthenticated', true);
		  			this.$store.commit('setEmail', this.email);
		  			this.$store.commit('setRole', 'working-group');
		  			this.$router.push('/dashboard?role=working-group');
		  		} else if(this.email === 'board@domain.com') {
		  			this.$store.commit('setAuthenticated', true);
		  			this.$store.commit('setEmail', this.email);
		  			this.$store.commit('setRole', 'board');
		  			this.$router.push('/dashboard?role=board');
		  		} else if(this.email === 'root@domain.com') {
		  			this.$store.commit('setAuthenticated', true);
		  			this.$store.commit('setEmail', this.email);
		  			this.$store.commit('setRole', 'root');
		  			this.$router.push('/dashboard?role=root');
		  		} else {
		  			this.showError();
		  		}
		  	},
		  	showError: function() {
		  		this.hasError = true;
		  	},
		  	hideError: function() {
		  		this.hasError = false;
		  	}
		  }
		}
</script>

<style scoped lang="scss">
  @import '../assets/style/globals';

  .notification {	
    padding: 6px 13px;
  }

  .login {
    display: flex;
    align-items: center;
    width: 100vw;
    height: 100vh;
  	min-height: 500px;
    justify-content: center;

  	.login-inner {
  		min-width: 480px;
  		text-align: center;

  		.login-box {
  			text-align: left;
  			max-width: 480px;
  			margin: auto;

  			.login-logo {
  				text-align: center;
  			}

  			.login-title {  				
			    font-size: 22px;
			    text-align: center;
			    border-bottom: #dbdbdb 1px solid;
			    padding-bottom: 20px;
			    margin-bottom: 20px;
  			}

  			.login-extra-actions {
			    display: flex;
			    margin-top: 15px;
			    margin-bottom: 40px;
			    justify-content: space-between;
			    a {
			    	color: $fg1;
			    }

			    a:hover {
			    	opacity: 0.5;
			    }
				}
  		}
  	}

  }

</style>