<template>
  <div id="cve-secondary-page-main-container" class="container">
    <div class="columns">
      <div class="column is-2">
      </div>
      <div class="column is-8">
        <main id="cve-secondary-page-main-content" role="main">
          <h2 class="title">{{cna.organizationName}}</h2>
          <h3 class="title">Scope</h3>
          <p class="content">{{cna.scope}}</p>
          <h3 class="title">Contact</h3>
          <p class="content" v-if="cna.contact[0].email.length > 0">Email(s){{cna.contact[0].email[0].email}}</p>
          <p class="content" v-if="(cna.contact.length > 0) && (cna.contact[0].webForm) != ''">Webform: {{cna.contact[0].webForm}}</p>
          <p class="content" v-if="cna.disclosurePolicy[0].URL != ''">Other contact method: {{cna.disclosurePolicy[0].URL}}
            <span v-if="cna.disclosurePolicy[0].language != 'English'">{{cna.disclosurePolicy[0].language}}</span>
          </p>
          <h3 class="title">Disclosure Policy</h3>
          <p class="content" v-for="(policy, index) in cna.disclosurePolicy" :key="index">{{cna.disclosurePolicy[0].URL}}</p>
          <h3 class="title">Security Advisories</h3>
          <p class="content" v-for="(advisory, index) in cna.securityAdvisories" :key="index">
            <span v-if="cna.securityAdvisories[0].alerts != ''">Alert(s): {{cna.securityAdvisories[0].alerts}}</span><br/>
            <span v-if="cna.securityAdvisories[0].advisories != ''">Advisories(s): {{cna.securityAdvisories[0].advisories}}</span>
          </p>
        </main>
      </div>
      <div class="column is-2">
      </div>
    </div>
  </div>
</template>

<script>
import cnasList from '../assets/data/CNAsList.json';

export default {
  computed: {
    cna() {
      const { shortName } = this.$route.params;
      return cnasList.filter((cna) => cna.shortName === shortName)[0];
    },
  },
};
</script>

<style scoped lang="scss">
@import '../assets/style/globals.scss';

h2, h3, p, span {
    text-align: left;
}
</style>
