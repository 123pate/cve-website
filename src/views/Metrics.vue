<template>
  <div class="metrics">
    <PriorityMessages></PriorityMessages>    
    <PrimaryNav></PrimaryNav>    
    <VulnerabilityNav></VulnerabilityNav>
    <div class="visualization-container">
    	<HorizontalBarChart :visualization-data="sampleData"></HorizontalBarChart>
    </div>
    <div class="visualization-container">
	    <VerticalBarChart :title="'Total Vulnerabilities'" :x-label="'Year'" :y-label="'Number of Vulnerabilities'" :visualization-data="annualData" :width="890" :height="300"></VerticalBarChart>
	  </div>
    <div class="visualization-container">
	    <DonutChart :title="'Vulnerabilities By Type'" :x-label="'Year'" :y-label="'Number of Vulnerabilities'" :visualization-data="annualData" :width="890" :height="300"></DonutChart>
	  </div>
  	<img src="../assets/metrics.png" />
    <FooterModule></FooterModule>
  </div>
</template>

<script>
	import VerticalBarChart from '@/components/visualizations/VerticalBarChart.vue';
	import HorizontalBarChart from '@/components/visualizations/HorizontalBarChart.vue';
	import DonutChart from '@/components/visualizations/DonutChart.vue';
	import PriorityMessages from '@/components/PriorityMessages.vue';
	import PrimaryNav from '@/components/PrimaryNav.vue';
	import VulnerabilityNav from '@/components/VulnerabilityNav.vue';
	import FooterModule from '@/components/FooterModule.vue';
	// import HorzontalBarChart from '@/components/visualizations/HorizontalBarChart.vue';
	export default {
	  name: 'Metrics',
	  data: function() {
	  	return {
	  		sampleData: [
		        {
		            "WeaknessId": 1,
		            "WeaknessName": "Buffer Overflow",
		            "WeaknessShortName": "buf",
		            "Total": 5390
		        },
		        {
		            "WeaknessId": 2,
		            "WeaknessName": "Cross-Site Scripting",
		            "WeaknessShortName": "xss",
		            "Total": 8233
		        },
		        {
		            "WeaknessId": 3,
		            "WeaknessName": "SQL Injection",
		            "WeaknessShortName": "sql-inject",
		            "Total": 6073
		        },
		        {
		            "WeaknessId": 4,
		            "WeaknessName": "Directory Traversal (Local File Inclusion)",
		            "WeaknessShortName": "dot",
		            "Total": 2721
		        },
		        {
		            "WeaknessId": 5,
		            "WeaknessName": "Path Disclosure",
		            "WeaknessShortName": "infoleak",
		            "Total": 1551
		        },
		        {
		            "WeaknessId": 6,
		            "WeaknessName": "Cross-Site Request Forgery ",
		            "WeaknessShortName": "csrf",
		            "Total": 889
		        },
		        {
		            "WeaknessId": 7,
		            "WeaknessName": "PHP-Include",
		            "WeaknessShortName": "php-include",
		            "Total": 2079
		        },
		        {
		            "WeaknessId": 8,
		            "WeaknessName": "Weak Authentication",
		            "WeaknessShortName": "auth",
		            "Total": 788
		        },
		        {
		            "WeaknessId": 9,
		            "WeaknessName": "General Configuration Problem",
		            "WeaknessShortName": "cf",
		            "Total": 133
		        },
		        {
		            "WeaknessId": 10,
		            "WeaknessName": "CRLF Injection",
		            "WeaknessShortName": "crlf",
		            "Total": 145
		        },
		        {
		            "WeaknessId": 11,
		            "WeaknessName": "Cryptography",
		            "WeaknessShortName": "crypt",
		            "Total": 708
		        },
		        {
		            "WeaknessId": 12,
		            "WeaknessName": "Default Configureation",
		            "WeaknessShortName": "default",
		            "Total": 109
		        },
		        {
		            "WeaknessId": 13,
		            "WeaknessName": "General Design Problem",
		            "WeaknessShortName": "design",
		            "Total": 29
		        },
		        {
		            "WeaknessId": 14,
		            "WeaknessName": "Denial of Service - Flood",
		            "WeaknessShortName": "dos-flood",
		            "Total": 257
		        },
		        {
		            "WeaknessId": 15,
		            "WeaknessName": "Denial of Service - Malformed Input",
		            "WeaknessShortName": "dos-malform",
		            "Total": 965
		        },
		        {
		            "WeaknessId": 16,
		            "WeaknessName": "Denial of Service - Release",
		            "WeaknessShortName": "dos-release",
		            "Total": 39
		        },
		        {
		            "WeaknessId": 17,
		            "WeaknessName": "Double-Free",
		            "WeaknessShortName": "double-free",
		            "Total": 83
		        },
		        {
		            "WeaknessId": 18,
		            "WeaknessName": "Eval Injection",
		            "WeaknessShortName": "eval-inject",
		            "Total": 73
		        },
		        {
		            "WeaknessId": 19,
		            "WeaknessName": "Form Field",
		            "WeaknessShortName": "form-field",
		            "Total": 178
		        },
		        {
		            "WeaknessId": 20,
		            "WeaknessName": "Format String",
		            "WeaknessShortName": "format-string",
		            "Total": 460
		        },
		        {
		            "WeaknessId": 21,
		            "WeaknessName": "Integer Overflow",
		            "WeaknessShortName": "int-overflow",
		            "Total": 630
		        },
		        {
		            "WeaknessId": 22,
		            "WeaknessName": "Symbolic Link Following",
		            "WeaknessShortName": "link",
		            "Total": 736
		        },
		        {
		            "WeaknessId": 23,
		            "WeaknessName": "Memory Leak",
		            "WeaknessShortName": "memleak",
		            "Total": 166
		        },
		        {
		            "WeaknessId": 24,
		            "WeaknessName": "Metacharacters",
		            "WeaknessShortName": "metachar",
		            "Total": 686
		        },
		        {
		            "WeaknessId": 25,
		            "WeaknessName": "Improper MS-DOS File Names",
		            "WeaknessShortName": "msdos-device",
		            "Total": 67
		        },
		        {
		            "WeaknessId": 26,
		            "WeaknessName": "Password",
		            "WeaknessShortName": "pass",
		            "Total": 414
		        },
		        {
		            "WeaknessId": 27,
		            "WeaknessName": "Insecure Permissions",
		            "WeaknessShortName": "perm",
		            "Total": 821
		        },
		        {
		            "WeaknessId": 28,
		            "WeaknessName": "Privilege",
		            "WeaknessShortName": "priv",
		            "Total": 672
		        },
		        {
		            "WeaknessId": 29,
		            "WeaknessName": "General Race Condition",
		            "WeaknessShortName": "race",
		            "Total": 278
		        },
		        {
		            "WeaknessId": 30,
		            "WeaknessName": "Insufficient Random Number Generation",
		            "WeaknessShortName": "rand",
		            "Total": 161
		        },
		        {
		            "WeaknessId": 31,
		            "WeaknessName": "Untrusted Search Path",
		            "WeaknessShortName": "relpath",
		            "Total": 412
		        },
		        {
		            "WeaknessId": 32,
		            "WeaknessName": "Sandbox Escape",
		            "WeaknessShortName": "sandbox",
		            "Total": 94
		        },
		        {
		            "WeaknessId": 33,
		            "WeaknessName": "Integer Signedness Error",
		            "WeaknessShortName": "signedness",
		            "Total": 106
		        },
		        {
		            "WeaknessId": 34,
		            "WeaknessName": "Spoof",
		            "WeaknessShortName": "spoof",
		            "Total": 71
		        },
		        {
		            "WeaknessId": 35,
		            "WeaknessName": "Type-Check",
		            "WeaknessShortName": "type-check",
		            "Total": 20
		        },
		        {
		            "WeaknessId": 36,
		            "WeaknessName": "File Upload",
		            "WeaknessShortName": "upload",
		            "Total": 336
		        },
		        {
		            "WeaknessId": 37,
		            "WeaknessName": "Sensitive Data in Web Document Root",
		            "WeaknessShortName": "webroot",
		            "Total": 363
		        },
		        {
		            "WeaknessId": 38,
		            "WeaknessName": "Other",
		            "WeaknessShortName": "other",
		            "Total": 12482
		        },
		        {
		            "WeaknessId": 39,
		            "WeaknessName": "Undiagnosed",
		            "WeaknessShortName": "undiag",
		            "Total": 552
		        },
		        {
		            "WeaknessId": 40,
		            "WeaknessName": "Unknown",
		            "WeaknessShortName": "unk",
		            "Total": 14911
		        },
		        {
		            "WeaknessId": 41,
		            "WeaknessName": "None",
		            "WeaknessShortName": "none",
		            "Total": 1
		        },
		        {
		            "WeaknessId": 42,
		            "WeaknessName": "Information Exposure Through an Error Message",
		            "WeaknessShortName": "path-reveal",
		            "Total": 4
		        }
		    ],
		    annualData: [
			  {
				  year: 1999,
				  count: 894
			  },
			  {
			    year: 2000,
			    count: 1020
			  },
			  {
			    year: 2001,
			    count: 1677
			  },
			  {
			    year: 2002,
			    count: 2156
			  },
			  {
			    year: 2003,
			    count: 1527
			  },
			  {
			    year: 2004,
			    count: 2451
			  },
			  {
			    year: 2005,
			    count: 4935
			  },
			  {
			    year: 2006,
			    count: 6610
			  },
			  {
			    year: 2007,
			    count: 6520
			  },
			  {
			    year: 2008,
			    count: 5632
			  },
			  {
			    year: 2009,
			    count: 5736
			  },
			  {
			    year: 2010,
			    count: 4652
			  },
			  {
			    year: 2011,
			    count: 4155
			  },
			  {
			    year: 2012,
			    count: 5297
			  },
			  {
			    year: 2013,
			    count: 5191
			  },
			  {
			    year: 2014,
			    count: 7946
			  },
			  {
			    year: 2015,
			    count: 6484
			  },
			  {
			    year: 2016,
			    count: 6447
			  },
			  {
			    year: 2017,
			    count: 14714
			  },
			  {
			    year: 2018,
			    count: 16556
			  },
			  {
			    year: 2019,
			    count: 12174
			  }
			]
	  	}
	  },
	  components: {
	  	HorizontalBarChart: HorizontalBarChart,
	  	VerticalBarChart: VerticalBarChart,
	  	DonutChart: DonutChart,
	  	PriorityMessages: PriorityMessages,
	  	PrimaryNav: PrimaryNav,
	  	VulnerabilityNav: VulnerabilityNav,
    	FooterModule: FooterModule
	  },
	  mounted: function() {
	  	this.$store.dispatch('loadMetrics');
	  }
	}
</script>

<style lang="scss" scoped>
.metrics {
	text-align: center;
}
</style>