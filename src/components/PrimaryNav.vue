<template>
  <div class="primary-nav">
    <ul>
      <li v-bind:class="isActive('vulnerabilities')">
        <router-link to="/">
          <svg class="left-bracket" width="12" height="38">
            <polyline points="11,37 1,27 1,11 11,1 "/>
          </svg>
          <div class="pn-text">Vulnerabilities</div>
          <svg class="right-bracket" width="12" height="38">
            <polyline points="1,1 11,11 11,27 1,37 "/>
          </svg>
        </router-link>
      </li>
      <li v-bind:class="isActive('authorities')">
        <router-link to="/authorities">
          <svg class="left-bracket" width="12" height="38">
            <polyline points="11,37 1,27 1,11 11,1 "/>
          </svg>
          <div class="pn-text">Authorities</div>
          <svg class="right-bracket" width="12" height="38">
            <polyline points="1,1 11,11 11,27 1,37 "/>
          </svg>
        </router-link>
      </li>
      <li v-bind:class="isActive('working-groups')">
        <router-link to="/working-groups">
          <svg class="left-bracket" width="12" height="38">
            <polyline points="11,37 1,27 1,11 11,1 "/>
          </svg>
          <div class="pn-text">Working Groups</div>
          <svg class="right-bracket" width="12" height="38">
            <polyline points="1,1 11,11 11,27 1,37 "/>
          </svg>
        </router-link>
      </li>
      <li v-bind:class="isActive('board')">
        <router-link to="/board">
          <svg class="left-bracket" width="12" height="38">
            <polyline points="11,37 1,27 1,11 11,1 "/>
          </svg>
          <div class="pn-text">Board</div>
          <svg class="right-bracket" width="12" height="38">
            <polyline points="1,1 11,11 11,27 1,37 "/>
          </svg>
        </router-link>
      </li>
      <li v-bind:class="isActive('metrics')">
        <router-link to="/metrics">
          <svg class="left-bracket" width="12" height="38">
            <polyline points="11,37 1,27 1,11 11,1 "/>
          </svg>
          <div class="pn-text">Metrics</div>
          <svg class="right-bracket" width="12" height="38">
            <polyline points="1,1 11,11 11,27 1,37 "/>
          </svg>
        </router-link>
      </li>
    </ul>
  </div><!-- .primary-nav -->
</template>

<script>
export default {
  name: 'PrimaryNav',
  props: {
    msg: String,
  },
  mounted: function() {
    window.pn = this;
  },
  methods: {
    // Get the current root section from the URL
    getSection: function() {
      var p = this.$route.path;
      if(p.indexOf('/') === 0) {
        p = p.substring(1, p.length);
      }
      var s = p;
      if(p.indexOf('/') !== -1) {
        s = p.substring(0, p.indexOf('/'))
      }
      return s;
    },
    // Return 'active' if the section parameter matches the root section
    isActive: function(section) {
      var s = this.getSection();
      var r = '';
      if(s === section || (s === '') && (section === 'vulnerabilities')) {
        r = 'active';
      }
      return r;
    }
  }
};
</script>

<style scoped lang="scss">
  @import '../assets/style/globals';

  .primary-nav {
    padding: 23px 20px;
    border-bottom: #d9d9d9 1px solid;

    ul {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: $max-width;
      margin: auto;


      li a {
        color: $fg1;
        font-size: 12px;
        font-weight: 500;
        text-transform: uppercase;
        display: flex;
        align-items: center;

        .pn-text {
          margin: 0 7px;
        }


        polyline {
          stroke: transparent;
          fill: none;
        }

        .active {
          polyline {
            stroke: $fg1;
            fill: none;
          }
        }        
      }


      li a:hover {
        polyline {
          stroke: #bbb;
        }
      }

      li.active a,
      li.active a:hover {        
        polyline {
          stroke: $fg1;
          fill: none;
        }
      }
    }
  }
</style>
