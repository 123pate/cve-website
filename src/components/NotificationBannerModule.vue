<template>
  <header id="CVE-Notification-Banner" class="cve-main-nav" role="alert" v-if="shouldDisplay == 'true'">
    <div class="notification is-warning">
      <button class="delete" style="margin:auto; float:right;"></button>
      <div  class="is-flex" style="justify-content: left; margin:auto;">
        <p id="alertIcon" class="is-hidden" style=""></p>
        <font-awesome-icon style="flex: 0 0 40px; margin-top:3px" size="1x"  icon="info-circle" role="alert"
          aria-labelledby="alertIcon" aria-hidden="false"/>
        <div v-for="(section, index) in notificationContents" :key="index">
          <p v-if="section.contentType == 'paragraph'" v-html="$sanitize(section.content)"></p>
          <p class="has-text-weight-bold" v-if="section.contentType == 'bold'">{{section.content}}</p>
          <p v-if="section.contentType == 'externalLink'">
            <a :href="section.link">{{section.linkText}}<font-awesome-icon icon="external-link-alt">
            </font-awesome-icon></a>
          </p>
          <p v-if="section.contentType == 'internalLink'">
            <router-link :to="section.link">{{section.linkText}}</router-link>
          </p>
        </div>
      </div>
    </div>
  </header>
</template>

<script>
import NotificationData from '@/assets/data/NotificationBanner.json';

export default {
  data() {
    return {
      shouldDisplay: NotificationData[0].shouldDisplay,
      notificationContents: NotificationData[0].notificationContents,
    };
  },
};

document.addEventListener('DOMContentLoaded', () => {
  (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
    const $notification = $delete.parentNode;

    $delete.addEventListener('click', () => {
      $notification.parentNode.removeChild($notification);
    });
  });
});
</script>

<style scoped lang="scss">
@import '../assets/style/globals.scss';

</style>
