// convert news item title into 5 words or less with '-' separator
export default {
  methods: {
    createShortTitle(newsItem) {
      const IGNORE_CHARS = /[^\w\s]/g; //any char that is NOT a space or a word character from the basic Latin alphabet
      const MAX_WORDS = 5;
      let numTitleWords = 0;
      let shortTitle = '';
      // delete non-alphabetic characters and replace multiple spaces with single
      let alphaTitle = newsItem.title.replaceAll(IGNORE_CHARS,'').replaceAll('  ', ' '); 
      try {
        numTitleWords = alphaTitle.match(/\s/g).length + 1;
      } catch (err) {
        // no spaces in title
      }
      if (numTitleWords > MAX_WORDS) { // shorten
        shortTitle = alphaTitle.split(' ').slice(0, MAX_WORDS).join('-');
      }
      else { shortTitle = alphaTitle.replaceAll(' ', '-'); }
      return shortTitle;
    },
    createItemUrlDetail(newsItem) { // format: {year}/{month}/{day}/{short-title}
      const dateParts = newsItem.date.split('-');
      let detail = `${dateParts[0]}/${dateParts[1]}/${dateParts[2]}`;
      let shortTitle = this.createShortTitle(newsItem);
      detail += `/${shortTitle}`;
      return detail;
    },
  },
};
