// convert news item title into 5 words or less with '-' separator
export default {
  methods: {
    createShortTitle(newsItem) {
      const IGNORE_CHARS = /[^\w\s]/g; // any char that is NOT a space, Latin charset alphanumeric character, or underscore
      const MAX_WORDS = 5;
      let numTitleWords = null;
      let shortTitle = '';
      // delete non-alphaNumeric characters and replace multiple spaces with single
      const alphaNumericTitle = newsItem.title.replaceAll(IGNORE_CHARS, '').replaceAll('  ', ' ');
      try {
        numTitleWords = alphaNumericTitle.match(/\s/g).length + 1;
      } catch (err) {
        // no spaces in title
        numTitleWords = 0;
      }
      if (numTitleWords > MAX_WORDS) { // shorten
        shortTitle = alphaNumericTitle.split(' ').slice(0, MAX_WORDS).join('-');
      } else {
        shortTitle = alphaNumericTitle.replaceAll(' ', '-');
      }
      return shortTitle;
    },
    createItemUrlDetail(newsItem) {
      const [year, month, day] = newsItem.date.split('-');
      let detail = `${year}/${month}/${day}`;
      const shortTitle = this.createShortTitle(newsItem);
      detail += `/${shortTitle}`;
      return detail;
    },
  },
};
